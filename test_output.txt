.....FF.F..F.FF.F......F..F.F................F....F...F.....FFF.FF.FFFFF [ 74%]
..........F.F.F....F.F...                                                [100%]
=================================== FAILURES ===================================
______ TestCreateInterestGroup.test_create_interest_group_duplicate_code _______
tests/characterization/interestgroups/test_create_interest_group.py:205: in test_create_interest_group_duplicate_code
    assert response.status_code == 422
E   assert 409 == 422
E    +  where 409 = <Response [409 Conflict]>.status_code
----------------------------- Captured stderr call -----------------------------
2025-09-03 14:23:38,143 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
2025-09-03 14:23:38,144 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
______ TestCreateInterestGroup.test_create_interest_group_duplicate_name _______
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:941: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: UNIQUE constraint failed: interest_groups.name

The above exception was the direct cause of the following exception:
tests/characterization/interestgroups/test_create_interest_group.py:226: in test_create_interest_group_duplicate_name
    response = client.post("/api/interest-groups", json=second_group_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/starlette/testclient.py:593: in post
    return super().post(
venv/lib/python3.12/site-packages/httpx/_client.py:1144: in post
    return self.request(
venv/lib/python3.12/site-packages/starlette/testclient.py:484: in request
    return super().request(
venv/lib/python3.12/site-packages/httpx/_client.py:825: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/httpx/_client.py:914: in send
    response = self._send_handling_auth(
venv/lib/python3.12/site-packages/httpx/_client.py:942: in _send_handling_auth
    response = self._send_handling_redirects(
venv/lib/python3.12/site-packages/httpx/_client.py:979: in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/httpx/_client.py:1014: in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/starlette/testclient.py:377: in handle_request
    raise exc
venv/lib/python3.12/site-packages/starlette/testclient.py:374: in handle_request
    portal.call(self.app, scope, receive, send)
venv/lib/python3.12/site-packages/anyio/from_thread.py:290: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py:456: in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
    raise self._exception
venv/lib/python3.12/site-packages/anyio/from_thread.py:221: in _call_func
    retval = await retval_or_awaitable
             ^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
    await self.middleware_stack(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/middleware/errors.py:187: in __call__
    raise exc
venv/lib/python3.12/site-packages/starlette/middleware/errors.py:165: in __call__
    await self.app(scope, receive, _send)
venv/lib/python3.12/site-packages/starlette/middleware/cors.py:85: in __call__
    await self.app(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py:62: in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/_exception_handler.py:53: in wrapped_app
    raise exc
venv/lib/python3.12/site-packages/starlette/_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
venv/lib/python3.12/site-packages/starlette/routing.py:715: in __call__
    await self.middleware_stack(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/routing.py:735: in app
    await route.handle(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/routing.py:288: in handle
    await self.app(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/routing.py:76: in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/_exception_handler.py:53: in wrapped_app
    raise exc
venv/lib/python3.12/site-packages/starlette/_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
venv/lib/python3.12/site-packages/starlette/routing.py:73: in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/fastapi/routing.py:301: in app
    raw_response = await run_endpoint_function(
venv/lib/python3.12/site-packages/fastapi/routing.py:212: in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
backend/app/main.py:1311: in create_interest_group
    db.commit()
venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2028: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4352: in flush
    self._flush(objects)
venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4487: in _flush
    with util.safe_reraise():
venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:146: in __exit__
    raise exc_value.with_traceback(exc_tb)
venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4448: in _flush
    flush_context.execute()
venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1418: in execute
    return meth(
venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:515: in _execute_on_connection
    return connection._execute_clauseelement(
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1640: in _execute_clauseelement
    ret = self._execute_context(
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:941: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: interest_groups.name
E   [SQL: INSERT INTO interest_groups (name, code, description, group_permissions, ai_functionality, typical_tasks, is_external, is_active, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Duplicate Name Group', 'second_code', 'Zweite Gruppe', '[]', None, None, 0, 1, '2025-09-03 12:23:38.207200')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured stderr call -----------------------------
2025-09-03 14:23:38,206 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
___________ TestDatabaseSchema.test_interest_groups_table_structure ____________
tests/characterization/interestgroups/test_database_schema.py:61: in test_interest_groups_table_structure
    assert col[2].upper() in expected['type'].upper(), f"Spalte {col_name} hat falschen Typ: {col[2]}"
E   AssertionError: Spalte name hat falschen Typ: VARCHAR(100)
E   assert 'VARCHAR(100)' in 'VARCHAR'
E    +  where 'VARCHAR(100)' = <built-in method upper of str object at 0x11b59c2b0>()
E    +    where <built-in method upper of str object at 0x11b59c2b0> = 'VARCHAR(100)'.upper
E    +  and   'VARCHAR' = <built-in method upper of str object at 0x104b25c20>()
E    +    where <built-in method upper of str object at 0x104b25c20> = 'VARCHAR'.upper
__________ TestDatabaseSchema.test_interest_groups_unique_constraints __________
tests/characterization/interestgroups/test_database_schema.py:118: in test_interest_groups_unique_constraints
    assert 'ix_interest_groups_name' in unique_indexes, "Name-Index ist nicht unique"
E   AssertionError: Name-Index ist nicht unique
E   assert 'ix_interest_groups_name' in ['ix_interest_groups_code_unique', 'ix_interest_groups_name_unique']
______________ TestDatabaseSchema.test_interest_group_data_types _______________
tests/characterization/interestgroups/test_database_schema.py:172: in test_interest_group_data_types
    assert isinstance(row[7], bool), f"is_external sollte Boolean sein, ist {type(row[7])}"
E   AssertionError: is_external sollte Boolean sein, ist <class 'int'>
E   assert False
E    +  where False = isinstance(0, bool)
________ TestDatabaseSchema.test_interest_group_constraints_enforcement ________
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:941: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: UNIQUE constraint failed: interest_groups.name

The above exception was the direct cause of the following exception:
tests/characterization/interestgroups/test_database_schema.py:209: in test_interest_group_constraints_enforcement
    connection.execute(text("""
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1418: in execute
    return meth(
venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:515: in _execute_on_connection
    return connection._execute_clauseelement(
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1640: in _execute_clauseelement
    ret = self._execute_context(
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:941: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: interest_groups.name
E   [SQL: 
E                   INSERT INTO interest_groups (name, code, is_external, is_active)
E                   VALUES ('First Group', 'unique_test_code', 0, 1)
E               ]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
______________ TestDatabaseSchema.test_interest_group_table_size _______________
tests/characterization/interestgroups/test_database_schema.py:273: in test_interest_group_table_size
    assert count >= 13, f"Tabelle sollte mindestens 13 Einträge haben, hat aber {count}"
E   AssertionError: Tabelle sollte mindestens 13 Einträge haben, hat aber 9
E   assert 9 >= 13
__________ TestDeleteInterestGroup.test_delete_interest_group_success __________
tests/characterization/interestgroups/test_delete_interest_group.py:33: in test_delete_interest_group_success
    assert get_response.status_code == 404
E   assert 200 == 404
E    +  where 200 = <Response [200 OK]>.status_code
----------------------------- Captured stderr call -----------------------------
2025-09-03 14:23:38,612 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
2025-09-03 14:23:38,615 [INFO] [httpx] HTTP Request: DELETE http://testserver/api/interest-groups/10 "HTTP/1.1 200 OK"
2025-09-03 14:23:38,616 [INFO] [httpx] HTTP Request: GET http://testserver/api/interest-groups/10 "HTTP/1.1 200 OK"
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: DELETE http://testserver/api/interest-groups/10 "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/api/interest-groups/10 "HTTP/1.1 200 OK"
________ TestDeleteInterestGroup.test_delete_interest_group_soft_delete ________
tests/characterization/interestgroups/test_delete_interest_group.py:79: in test_delete_interest_group_soft_delete
    assert get_response.status_code == 404
E   assert 200 == 404
E    +  where 200 = <Response [200 OK]>.status_code
----------------------------- Captured stderr call -----------------------------
2025-09-03 14:23:38,626 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
2025-09-03 14:23:38,627 [INFO] [httpx] HTTP Request: DELETE http://testserver/api/interest-groups/11 "HTTP/1.1 200 OK"
2025-09-03 14:23:38,628 [INFO] [httpx] HTTP Request: GET http://testserver/api/interest-groups/11 "HTTP/1.1 200 OK"
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: DELETE http://testserver/api/interest-groups/11 "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/api/interest-groups/11 "HTTP/1.1 200 OK"
____ TestDeleteInterestGroup.test_delete_interest_group_multiple_deletions _____
tests/characterization/interestgroups/test_delete_interest_group.py:138: in test_delete_interest_group_multiple_deletions
    assert second_delete.status_code == 404
E   assert 200 == 404
E    +  where 200 = <Response [200 OK]>.status_code
----------------------------- Captured stderr call -----------------------------
2025-09-03 14:23:38,636 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
2025-09-03 14:23:38,638 [INFO] [httpx] HTTP Request: DELETE http://testserver/api/interest-groups/13 "HTTP/1.1 200 OK"
2025-09-03 14:23:38,639 [INFO] [httpx] HTTP Request: DELETE http://testserver/api/interest-groups/13 "HTTP/1.1 200 OK"
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: DELETE http://testserver/api/interest-groups/13 "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: DELETE http://testserver/api/interest-groups/13 "HTTP/1.1 200 OK"
____ TestInterestGroupBusinessRules.test_interest_group_permissions_parsing ____
tests/characterization/interestgroups/test_interest_group_business_rules.py:64: in test_interest_group_permissions_parsing
    assert permissions == ["perm1", "perm2", "perm3"]
E   AssertionError: assert [] == ['perm1', 'perm2', 'perm3']
E     
E     Right contains 3 more items, first extra item: 'perm1'
E     Use -v to get more diff
___ TestInterestGroupBusinessRules.test_interest_group_string_representation ___
tests/characterization/interestgroups/test_interest_group_business_rules.py:258: in test_interest_group_string_representation
    assert "String Test Group" in str_repr
E   AssertionError: assert 'String Test Group' in '<app.models.InterestGroup object at 0x12f3693a0>'
_____________ TestEndpointParity.test_create_interest_group_parity _____________
tests/characterization/interestgroups/test_parity_endpoints.py:106: in test_create_interest_group_parity
    assert legacy_response[0] == 200, f"Legacy sollte 200 zurückgeben, aber gab {legacy_response[0]} zurück"
E   AssertionError: Legacy sollte 200 zurückgeben, aber gab 409 zurück
E   assert 409 == 200
----------------------------- Captured stderr call -----------------------------
2025-09-03 14:23:38,707 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
2025-09-03 14:23:38,708 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
2025-09-03 14:23:38,709 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
________ TestPermissionHandling.test_permission_parsing_comma_separated ________
tests/characterization/interestgroups/test_permission_handling.py:56: in test_permission_parsing_comma_separated
    assert permissions == ["read", "write", "delete"]
E   AssertionError: assert [] == ['read', 'write', 'delete']
E     
E     Right contains 3 more items, first extra item: 'read'
E     Use -v to get more diff
__________ TestPermissionHandling.test_permission_parsing_list_input ___________
tests/characterization/interestgroups/test_permission_handling.py:80: in test_permission_parsing_list_input
    assert permissions == ["create", "read", "update", "delete"]
E   AssertionError: assert [] == ['create', 'r...te', 'delete']
E     
E     Right contains 4 more items, first extra item: 'create'
E     Use -v to get more diff
__________ TestPermissionHandling.test_permission_parsing_edge_cases ___________
tests/characterization/interestgroups/test_permission_handling.py:119: in test_permission_parsing_edge_cases
    assert permissions == ["", ""]
E   AssertionError: assert [] == ['', '']
E     
E     Right contains 2 more items, first extra item: ''
E     Use -v to get more diff
_______ TestPermissionHandling.test_permission_parsing_complex_scenarios _______
tests/characterization/interestgroups/test_permission_handling.py:170: in test_permission_parsing_complex_scenarios
    assert permissions == ["user management", "role management", "data access"]
E   AssertionError: assert [] == ['user manage...'data access']
E     
E     Right contains 3 more items, first extra item: 'user management'
E     Use -v to get more diff
______________ TestPermissionHandling.test_permission_consistency ______________
tests/characterization/interestgroups/test_permission_handling.py:202: in test_permission_consistency
    assert list_result == test_permissions
E   AssertionError: assert [] == ['read', 'write', 'delete']
E     
E     Right contains 3 more items, first extra item: 'read'
E     Use -v to get more diff
______________ TestPermissionHandling.test_permission_performance ______________
tests/characterization/interestgroups/test_permission_handling.py:248: in test_permission_performance
    assert permissions == many_permissions
E   AssertionError: assert [] == ['permission_...ssion_5', ...]
E     
E     Right contains 100 more items, first extra item: 'permission_0'
E     Use -v to get more diff
______________ TestPermissionParity.test_empty_permissions_parity ______________
tests/characterization/interestgroups/test_permission_parity.py:39: in test_empty_permissions_parity
    assert create_comparison["status_equal"], f"Create-Status unterscheidet sich: {create_comparison['status_diff']}"
E   AssertionError: Create-Status unterscheidet sich: {'legacy': 200, 'ddd': 409}
E   assert False
----------------------------- Captured stdout call -----------------------------
Teste leere Permissions...
Create mit leeren Permissions: ❌ ABWEICHUNG: Status: 200→409 | Body unterscheidet sich
----------------------------- Captured stderr call -----------------------------
2025-09-03 14:23:38,811 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
2025-09-03 14:23:38,812 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
_____________ TestPermissionParity.test_simple_permissions_parity ______________
tests/characterization/interestgroups/test_permission_parity.py:107: in test_simple_permissions_parity
    assert create_comparison["status_equal"], f"Create-Status unterscheidet sich: {create_comparison['status_diff']}"
E   AssertionError: Create-Status unterscheidet sich: {'legacy': 200, 'ddd': 409}
E   assert False
----------------------------- Captured stdout call -----------------------------
Teste einfache Permissions...
Create mit einfachen Permissions: ❌ ABWEICHUNG: Status: 200→409 | Body unterscheidet sich
----------------------------- Captured stderr call -----------------------------
2025-09-03 14:23:38,817 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
2025-09-03 14:23:38,818 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
_____________ TestPermissionParity.test_complex_permissions_parity _____________
tests/characterization/interestgroups/test_permission_parity.py:175: in test_complex_permissions_parity
    assert create_comparison["status_equal"], f"Create-Status unterscheidet sich: {create_comparison['status_diff']}"
E   AssertionError: Create-Status unterscheidet sich: {'legacy': 200, 'ddd': 409}
E   assert False
----------------------------- Captured stdout call -----------------------------
Teste komplexe Permissions...
Create mit komplexen Permissions: ❌ ABWEICHUNG: Status: 200→409 | Body unterscheidet sich
----------------------------- Captured stderr call -----------------------------
2025-09-03 14:23:38,823 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
2025-09-03 14:23:38,824 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
___________ TestPermissionParity.test_json_string_permissions_parity ___________
tests/characterization/interestgroups/test_permission_parity.py:246: in test_json_string_permissions_parity
    assert create_comparison["status_equal"], f"Create-Status unterscheidet sich: {create_comparison['status_diff']}"
E   AssertionError: Create-Status unterscheidet sich: {'legacy': 200, 'ddd': 409}
E   assert False
----------------------------- Captured stdout call -----------------------------
Teste JSON-String Permissions: ["VIEW", "EDIT", "DELETE"]
Create mit JSON-String Permissions: ❌ ABWEICHUNG: Status: 200→409 | Body unterscheidet sich
----------------------------- Captured stderr call -----------------------------
2025-09-03 14:23:38,828 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
2025-09-03 14:23:38,830 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
____________ TestStatuscodeParity.test_duplicate_constraints_parity ____________
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:941: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: UNIQUE constraint failed: interest_groups.name

The above exception was the direct cause of the following exception:
tests/characterization/interestgroups/test_statuscode_parity.py:89: in test_duplicate_constraints_parity
    legacy_response = run_request(
tests/helpers/ab_runner.py:77: in run_request
    response = client.request(**request_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/starlette/testclient.py:484: in request
    return super().request(
venv/lib/python3.12/site-packages/httpx/_client.py:825: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/httpx/_client.py:914: in send
    response = self._send_handling_auth(
venv/lib/python3.12/site-packages/httpx/_client.py:942: in _send_handling_auth
    response = self._send_handling_redirects(
venv/lib/python3.12/site-packages/httpx/_client.py:979: in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/httpx/_client.py:1014: in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/starlette/testclient.py:377: in handle_request
    raise exc
venv/lib/python3.12/site-packages/starlette/testclient.py:374: in handle_request
    portal.call(self.app, scope, receive, send)
venv/lib/python3.12/site-packages/anyio/from_thread.py:290: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py:456: in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
    raise self._exception
venv/lib/python3.12/site-packages/anyio/from_thread.py:221: in _call_func
    retval = await retval_or_awaitable
             ^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
    await self.middleware_stack(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/middleware/errors.py:187: in __call__
    raise exc
venv/lib/python3.12/site-packages/starlette/middleware/errors.py:165: in __call__
    await self.app(scope, receive, _send)
venv/lib/python3.12/site-packages/starlette/middleware/cors.py:85: in __call__
    await self.app(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py:62: in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/_exception_handler.py:53: in wrapped_app
    raise exc
venv/lib/python3.12/site-packages/starlette/_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
venv/lib/python3.12/site-packages/starlette/routing.py:715: in __call__
    await self.middleware_stack(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/routing.py:735: in app
    await route.handle(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/routing.py:288: in handle
    await self.app(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/routing.py:76: in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/_exception_handler.py:53: in wrapped_app
    raise exc
venv/lib/python3.12/site-packages/starlette/_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
venv/lib/python3.12/site-packages/starlette/routing.py:73: in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/fastapi/routing.py:301: in app
    raw_response = await run_endpoint_function(
venv/lib/python3.12/site-packages/fastapi/routing.py:212: in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
backend/app/main.py:1311: in create_interest_group
    db.commit()
venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py:2028: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1313: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py:139: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py:1288: in _prepare_impl
    self.session.flush()
venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4352: in flush
    self._flush(objects)
venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4487: in _flush
    with util.safe_reraise():
venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py:146: in __exit__
    raise exc_value.with_traceback(exc_tb)
venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py:4448: in _flush
    flush_context.execute()
venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute
    rec.execute(self)
venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj
    _emit_insert_statements(
venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1418: in execute
    return meth(
venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py:515: in _execute_on_connection
    return connection._execute_clauseelement(
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1640: in _execute_clauseelement
    ret = self._execute_context(
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context
    return self._exec_single_context(
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context
    self.dialect.do_execute(
venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py:941: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) UNIQUE constraint failed: interest_groups.name
E   [SQL: INSERT INTO interest_groups (name, code, description, group_permissions, ai_functionality, typical_tasks, is_external, is_active, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Duplicate Test Group', 'different_code', 'Andere Beschreibung', '[]', None, None, 0, 1, '2025-09-03 12:23:38.920772')]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured stdout call -----------------------------
Teste Duplicate-Constraints...
----------------------------- Captured stderr call -----------------------------
2025-09-03 14:23:38,919 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
____________ TestStatuscodeParity.test_invalid_content_type_parity _____________
tests/characterization/interestgroups/test_statuscode_parity.py:245: in test_invalid_content_type_parity
    assert comparison["status_equal"], f"Status unterscheidet sich: {comparison['status_diff']}"
E   AssertionError: Status unterscheidet sich: {'legacy': 200, 'ddd': 409}
E   assert False
----------------------------- Captured stdout call -----------------------------
Teste ungültigen Content-Type...
Form-data Content-Type: ✅ IDENTISCH
Kein Content-Type Header: ❌ ABWEICHUNG: Status: 200→409 | Body unterscheidet sich
----------------------------- Captured stderr call -----------------------------
2025-09-03 14:23:39,232 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 422 Unprocessable Entity"
2025-09-03 14:23:39,233 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 422 Unprocessable Entity"
2025-09-03 14:23:39,235 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
2025-09-03 14:23:39,237 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 422 Unprocessable Entity"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 422 Unprocessable Entity"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
_________________ TestStatuscodeParity.test_edge_cases_parity __________________
tests/characterization/interestgroups/test_statuscode_parity.py:377: in test_edge_cases_parity
    assert comparison["status_equal"], f"Status unterscheidet sich: {comparison['status_diff']}"
E   AssertionError: Status unterscheidet sich: {'legacy': 200, 'ddd': 409}
E   assert False
----------------------------- Captured stdout call -----------------------------
Teste Edge-Cases...
Leere Strings: ✅ IDENTISCH
None-Werte: ❌ ABWEICHUNG: Status: 200→409 | Body unterscheidet sich
----------------------------- Captured stderr call -----------------------------
2025-09-03 14:23:39,247 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 422 Unprocessable Entity"
2025-09-03 14:23:39,248 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 422 Unprocessable Entity"
2025-09-03 14:23:39,250 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
2025-09-03 14:23:39,251 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 422 Unprocessable Entity"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 422 Unprocessable Entity"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 409 Conflict"
_____ TestUpdateInterestGroup.test_update_interest_group_validation_rules ______
tests/characterization/interestgroups/test_update_interest_group.py:145: in test_update_interest_group_validation_rules
    response = client.put(f"/api/interest-groups/{group_id}", json=invalid_code_update)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/starlette/testclient.py:626: in put
    return super().put(
venv/lib/python3.12/site-packages/httpx/_client.py:1181: in put
    return self.request(
venv/lib/python3.12/site-packages/starlette/testclient.py:484: in request
    return super().request(
venv/lib/python3.12/site-packages/httpx/_client.py:825: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/httpx/_client.py:914: in send
    response = self._send_handling_auth(
venv/lib/python3.12/site-packages/httpx/_client.py:942: in _send_handling_auth
    response = self._send_handling_redirects(
venv/lib/python3.12/site-packages/httpx/_client.py:979: in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/httpx/_client.py:1014: in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/starlette/testclient.py:377: in handle_request
    raise exc
venv/lib/python3.12/site-packages/starlette/testclient.py:374: in handle_request
    portal.call(self.app, scope, receive, send)
venv/lib/python3.12/site-packages/anyio/from_thread.py:290: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py:456: in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py:401: in __get_result
    raise self._exception
venv/lib/python3.12/site-packages/anyio/from_thread.py:221: in _call_func
    retval = await retval_or_awaitable
             ^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/applications.py:113: in __call__
    await self.middleware_stack(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/middleware/errors.py:187: in __call__
    raise exc
venv/lib/python3.12/site-packages/starlette/middleware/errors.py:165: in __call__
    await self.app(scope, receive, _send)
venv/lib/python3.12/site-packages/starlette/middleware/cors.py:85: in __call__
    await self.app(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py:62: in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/_exception_handler.py:53: in wrapped_app
    raise exc
venv/lib/python3.12/site-packages/starlette/_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
venv/lib/python3.12/site-packages/starlette/routing.py:715: in __call__
    await self.middleware_stack(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/routing.py:735: in app
    await route.handle(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/routing.py:288: in handle
    await self.app(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/routing.py:76: in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
venv/lib/python3.12/site-packages/starlette/_exception_handler.py:53: in wrapped_app
    raise exc
venv/lib/python3.12/site-packages/starlette/_exception_handler.py:42: in wrapped_app
    await app(scope, receive, sender)
venv/lib/python3.12/site-packages/starlette/routing.py:73: in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/fastapi/routing.py:327: in app
    content = await serialize_response(
venv/lib/python3.12/site-packages/fastapi/routing.py:176: in serialize_response
    raise ResponseValidationError(
E   fastapi.exceptions.ResponseValidationError: 1 validation errors:
E     {'type': 'value_error', 'loc': ('response', 'code'), 'msg': 'Value error, Code muss snake_case Format haben', 'input': 'InvalidCode', 'ctx': {'error': ValueError('Code muss snake_case Format haben')}}
----------------------------- Captured stderr call -----------------------------
2025-09-03 14:23:39,268 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
2025-09-03 14:23:39,269 [INFO] [httpx] HTTP Request: PUT http://testserver/api/interest-groups/36 "HTTP/1.1 422 Unprocessable Entity"
2025-09-03 14:23:39,270 [INFO] [httpx] HTTP Request: PUT http://testserver/api/interest-groups/36 "HTTP/1.1 422 Unprocessable Entity"
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: PUT http://testserver/api/interest-groups/36 "HTTP/1.1 422 Unprocessable Entity"
INFO     httpx:_client.py:1025 HTTP Request: PUT http://testserver/api/interest-groups/36 "HTTP/1.1 422 Unprocessable Entity"
___ TestUpdateInterestGroup.test_update_interest_group_duplicate_constraints ___
tests/characterization/interestgroups/test_update_interest_group.py:224: in test_update_interest_group_duplicate_constraints
    assert response.status_code == 422
E   assert 409 == 422
E    +  where 409 = <Response [409 Conflict]>.status_code
----------------------------- Captured stderr call -----------------------------
2025-09-03 14:23:39,385 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
2025-09-03 14:23:39,387 [INFO] [httpx] HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
2025-09-03 14:23:39,388 [INFO] [httpx] HTTP Request: PUT http://testserver/api/interest-groups/38 "HTTP/1.1 409 Conflict"
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/interest-groups "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1025 HTTP Request: PUT http://testserver/api/interest-groups/38 "HTTP/1.1 409 Conflict"
=============================== warnings summary ===============================
backend/app/database.py:63
backend/app/database.py:63
  /Users/reiner/Documents/DocuMind-AI/backend/app/database.py:63: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    Base = declarative_base()

<frozen importlib._bootstrap>:488
<frozen importlib._bootstrap>:488
  <frozen importlib._bootstrap>:488: DeprecationWarning: builtin type SwigPyPacked has no __module__ attribute

<frozen importlib._bootstrap>:488
<frozen importlib._bootstrap>:488
  <frozen importlib._bootstrap>:488: DeprecationWarning: builtin type SwigPyObject has no __module__ attribute

<frozen importlib._bootstrap>:488
  <frozen importlib._bootstrap>:488: DeprecationWarning: builtin type swigvarlink has no __module__ attribute

venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854
  /Users/reiner/Documents/DocuMind-AI/venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854: DeprecationWarning: 'crypt' is deprecated and slated for removal in Python 3.13
    from crypt import crypt as _crypt

venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:291
venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:291
  /Users/reiner/Documents/DocuMind-AI/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:291: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

backend/app/schemas_enhanced.py:130
backend/app/schemas_enhanced.py:130
  /Users/reiner/Documents/DocuMind-AI/backend/app/schemas_enhanced.py:130: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/
    @validator('chunk_id', always=True)

backend/app/main.py:738
backend/app/main.py:738
  /Users/reiner/Documents/DocuMind-AI/backend/app/main.py:738: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    @app.on_event("startup")

venv/lib/python3.12/site-packages/fastapi/applications.py:4495
venv/lib/python3.12/site-packages/fastapi/applications.py:4495
  /Users/reiner/Documents/DocuMind-AI/venv/lib/python3.12/site-packages/fastapi/applications.py:4495: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    return self.router.on_event(event_type)

tests/characterization/interestgroups/test_create_interest_group.py: 8 warnings
tests/characterization/interestgroups/test_delete_interest_group.py: 7 warnings
tests/characterization/interestgroups/test_parity_endpoints.py: 7 warnings
tests/characterization/interestgroups/test_permission_parity.py: 7 warnings
tests/characterization/interestgroups/test_soft_delete_parity.py: 4 warnings
tests/characterization/interestgroups/test_statuscode_parity.py: 4 warnings
tests/characterization/interestgroups/test_update_interest_group.py: 15 warnings
  /Users/reiner/Documents/DocuMind-AI/venv/lib/python3.12/site-packages/pydantic/main.py:1114: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/
    warnings.warn('The `dict` method is deprecated; use `model_dump` instead.', category=PydanticDeprecatedSince20)

tests/characterization/interestgroups/test_create_interest_group.py: 8 warnings
tests/characterization/interestgroups/test_delete_interest_group.py: 7 warnings
tests/characterization/interestgroups/test_parity_endpoints.py: 5 warnings
tests/characterization/interestgroups/test_permission_parity.py: 5 warnings
tests/characterization/interestgroups/test_soft_delete_parity.py: 4 warnings
tests/characterization/interestgroups/test_statuscode_parity.py: 4 warnings
tests/characterization/interestgroups/test_update_interest_group.py: 7 warnings
  /Users/reiner/Documents/DocuMind-AI/venv/lib/python3.12/site-packages/sqlalchemy/sql/schema.py:3596: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    return util.wrap_callable(lambda ctx: fn(), fn)  # type: ignore

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/characterization/interestgroups/test_create_interest_group.py::TestCreateInterestGroup::test_create_interest_group_duplicate_code
FAILED tests/characterization/interestgroups/test_create_interest_group.py::TestCreateInterestGroup::test_create_interest_group_duplicate_name
FAILED tests/characterization/interestgroups/test_database_schema.py::TestDatabaseSchema::test_interest_groups_table_structure
FAILED tests/characterization/interestgroups/test_database_schema.py::TestDatabaseSchema::test_interest_groups_unique_constraints
FAILED tests/characterization/interestgroups/test_database_schema.py::TestDatabaseSchema::test_interest_group_data_types
FAILED tests/characterization/interestgroups/test_database_schema.py::TestDatabaseSchema::test_interest_group_constraints_enforcement
FAILED tests/characterization/interestgroups/test_database_schema.py::TestDatabaseSchema::test_interest_group_table_size
FAILED tests/characterization/interestgroups/test_delete_interest_group.py::TestDeleteInterestGroup::test_delete_interest_group_success
FAILED tests/characterization/interestgroups/test_delete_interest_group.py::TestDeleteInterestGroup::test_delete_interest_group_soft_delete
FAILED tests/characterization/interestgroups/test_delete_interest_group.py::TestDeleteInterestGroup::test_delete_interest_group_multiple_deletions
FAILED tests/characterization/interestgroups/test_interest_group_business_rules.py::TestInterestGroupBusinessRules::test_interest_group_permissions_parsing
FAILED tests/characterization/interestgroups/test_interest_group_business_rules.py::TestInterestGroupBusinessRules::test_interest_group_string_representation
FAILED tests/characterization/interestgroups/test_parity_endpoints.py::TestEndpointParity::test_create_interest_group_parity
FAILED tests/characterization/interestgroups/test_permission_handling.py::TestPermissionHandling::test_permission_parsing_comma_separated
FAILED tests/characterization/interestgroups/test_permission_handling.py::TestPermissionHandling::test_permission_parsing_list_input
FAILED tests/characterization/interestgroups/test_permission_handling.py::TestPermissionHandling::test_permission_parsing_edge_cases
FAILED tests/characterization/interestgroups/test_permission_handling.py::TestPermissionHandling::test_permission_parsing_complex_scenarios
FAILED tests/characterization/interestgroups/test_permission_handling.py::TestPermissionHandling::test_permission_consistency
FAILED tests/characterization/interestgroups/test_permission_handling.py::TestPermissionHandling::test_permission_performance
FAILED tests/characterization/interestgroups/test_permission_parity.py::TestPermissionParity::test_empty_permissions_parity
FAILED tests/characterization/interestgroups/test_permission_parity.py::TestPermissionParity::test_simple_permissions_parity
FAILED tests/characterization/interestgroups/test_permission_parity.py::TestPermissionParity::test_complex_permissions_parity
FAILED tests/characterization/interestgroups/test_permission_parity.py::TestPermissionParity::test_json_string_permissions_parity
FAILED tests/characterization/interestgroups/test_statuscode_parity.py::TestStatuscodeParity::test_duplicate_constraints_parity
FAILED tests/characterization/interestgroups/test_statuscode_parity.py::TestStatuscodeParity::test_invalid_content_type_parity
FAILED tests/characterization/interestgroups/test_statuscode_parity.py::TestStatuscodeParity::test_edge_cases_parity
FAILED tests/characterization/interestgroups/test_update_interest_group.py::TestUpdateInterestGroup::test_update_interest_group_validation_rules
FAILED tests/characterization/interestgroups/test_update_interest_group.py::TestUpdateInterestGroup::test_update_interest_group_duplicate_constraints
28 failed, 69 passed, 108 warnings in 1.97s
sys:1: DeprecationWarning: builtin type swigvarlink has no __module__ attribute
